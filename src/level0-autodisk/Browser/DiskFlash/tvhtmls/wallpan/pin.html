<html>
<head>
	<title>PIN Setup</title>
<DISPLAY noscroll skipback nologo nooptions noreconnectalert>
<object type="application/x-wtv-wallet" name="myWallet"></object>
<script src="../wallet.js"></script>
<script>
function CheckPinInput(){
  var addComma = ", ";
  var fieldName = "";
  if (document.pin.newpin.value.length == 0) {
    if (fieldName != "") {fieldName += addComma;}
    fieldName += "Type in Wallet PIN";
  }
  if (document.pin.confirmpin.value.length == 0) {
  	if (fieldName != "") {fieldName += addComma;}
    fieldName += "Re-type to confirm PIN";
  }
  if (document.pin.newpin.value.length == 0 || document.pin.confirmpin.value.length == 0) {
    document.pin.ErrorMessage.value = fieldName + " info is required to fulfill your request.";
  } else if (!ValidPIN(document.pin.newpin.value,document.pin.confirmpin.value)){
    document.pin.ErrorMessage.value = "The PINs you typed in are incorrect. Please try typing them in again, make sure that they match, are only numbers, and 4 numbers in length, for example: 1234.";
  } else {
      SubmitPinInfo();
  }
}
function SubmitPinInfo() {
  myWallet.setPIN(document.pin.confirmpin.value);
}
</script>
</head>
<body text=e0e4e7 link=ffcf69 vlink=ffcf69 fontsize=large vspace=0 hspace=0 nobackground>
<form name="pin" action="client:walletpanelaction" onSubmit="CheckPinInput();">
<input type=hidden name="ErrorMessage">
<table width=100% border=0 cellspacing=0 cellpadding=0>
  <tr><td width=100% absheight=3 background="file://ROM/tvimages/TVPanel_BlueTop.gif">
  <tr><td width=100% bgcolor=#001133 transparency=15% valign=top>
    <table width=100% border=0 cellspacing=0 cellpadding=0>
    <tr><td colspan=2 height=30 background="file://ROM/tvimages/TVPanel_blue.gif">
	<table border=0 cellspacing=0 cellpadding=0>
	  <tr><td abswidth=20><td abswidth=520><font color=#b2b2b2>Create a PIN and choose <b>Done</b> to save to &wtv-tvwallet;.</font>
	  <td><img src="file://ROM/tvimages/WalletLock.gif">
	  <td abswidth=10>
	</table>
    <tr><td abswidth=20><td><table width=500 border=0 cellspacing=0 cellpadding=0>
    <tr><td abswidth=200 align=right height=34><font size=-1 color=6cb28b>Type in &wtv-tvwallet; PIN:</font>
	<td abswidth=7>
	<td><font color=ffcf69><input type="password" name="newpin" usestyle size=4 maxlength=4 border=1 bgcolor=000000 selected></font>
	<td abswidth=20>
	<td><font color=#999999>Your PIN must</font>
    <tr><td align=right height=34><font size=-1 color=6cb28b>Re-type to confirm:</font>
	<td>
	<td><font color=ffcf69><input type="password" name="confirmpin" usestyle size=4 maxlength=4 border=1 bgcolor=000000 nextdown=done nextright=done></font>
	<td>
	<td valign=top><font color=#999999>be 4 numbers.</font>
	</table>
  </table>
  <tr><td width=100% absheight=4 background="file://ROM/tvimages/TVPanel_Groove.gif">
  <tr><td width=100% absheight=3 background="file://ROM/tvimages/TVPanel_GrayTop.gif" valign=center>
  <tr><td width=100% absheight=40 background="file://ROM/tvimages/TVPanel_Gray.gif" valign=center>
  <table border=0 cellspacing=0 cellpadding=0><tr>
    <td abswidth=20>
	<td><font size=-1 color=ffcf69><input type=button borderimage="file://ROM/tvimages/TVButtonBorder.bif" value="About Security" usestyle width=160 onClick="SetPage('faq_secure.html');"></font>
  <td width=394><td><font size=-1 color=#ffcf69><input type=submit borderimage="file://ROM/tvimages/TVButtonBorder.bif" id=done Value="Done" usestyle width=150></font>
	<td abswidth=10>
  </table>
  <tr><td width=100% absheight=3 background="file://ROM/tvimages/TVPanel_Gray.gif" valign=center>
</table>
</form>
</body>
</html>
