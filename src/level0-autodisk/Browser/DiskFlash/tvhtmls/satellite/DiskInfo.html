<html>

<head>
	<display NoLogo NoStatus ClearBack NoSave>
	<title>Disk Technical Information</title>
</head>

<body bgcolor=181818 text=44cc55 hspace=0>
<br>
<h1><spacer type=block width=24><font color=e7ce4a>Disk Technical Information</font></h1>

<table cellspacing=0 cellpadding=0>
  <tr>
    <td width=24></td>
    <td>
	  <script>
	    function getHex2(partition, offset) {
		  var i = Disk.readByte(partition, offset);
		  var s = i.toString(16);
		  if ( i < 16 ) {
		    s = "0" + s;
		  }
		  return s;
		}
	    function getLongHex(partition, offset) {
		  var a = getHex2(partition, offset);
		  var b = getHex2(partition, offset+1);
		  var c = getHex2(partition, offset+2);
		  var d = getHex2(partition, offset+3);
		  return a + b + c + d;
		}
	    function getLongAt(partition, offset) {
		  var a = Disk.readByte(partition, offset);
		  var b = Disk.readByte(partition, offset+1);
		  var c = Disk.readByte(partition, offset+2);
		  var d = Disk.readByte(partition, offset+3);
		  var sum = ((((a * 256) + b ) * 256 + c) * 256 + d);
		  return sum;
		}
		function getStartHRef(partitionName) {
		  return "<a href=client:boota?partition=" + partitionName + ">";
		}
	    function getVersion(partition) {
		  if ( partition == 0 || Disk.partitionType(partition) != 3 ) {
		    return "";
		  }
		  var version = getLongAt(partition, 20);
		  var sum = getLongHex(partition, 8);
		  var result = "version " + version  + "<br>sum 0x" + sum;
		  if ( navigator.isInternalBuild == true ) {
		    var starthref = getStartHRef(Disk.partitionName(partition));
			result = result + "<br>" + starthref + "start game</a>";
		  }
		  return result;
		}

		function getType(partition) {
		  var type = Disk.partitionType(partition);
		  if ( type == 0 ) {
			return "";
		  }
		  else if ( type == 2 ) {
		    return "vfat";
		  }
		  else if ( type == 3 ) {
		    return "boot";
		  }
		  else {
		    return "?";
		  }
		}

		document.write("<table border><tr><td>Partition</td><td>Type</td><td align=right>Size (Mb)</td><td></td></tr>");
		var i;
		var numPartitions = Disk.partitionCount();
		for(i = 0; i < numPartitions; i++ ) {
			document.write("<tr><td>" + Disk.partitionName(i)
			 + "</td><td>" + getType(i)
			 + "</td><td align=right>" + (Disk.partitionSize(i) + 32)/ 2048
			 + "</td><td>" + getVersion(i)
			 + "</td></tr>"
			 );
		}
		document.write("</table>");
	  </script>
    </td>
  </tr>
</table>

<table cellspacing=0 cellpadding=0 width=100%>
	<tr>
		<td width=20>
		<td height=20>
	<tr>
		<td>
		<td height=2 bgcolor=2B2B2B>
			<spacer>
	<tr>
		<td height=1>
	<tr>
		<td>
		<td height=2 bgcolor=0D0D0D>
			<spacer>
	<tr>
		<td height=6>
	<tr>
		<td>
		<td align=right>
			<table>
				<tr>
					<td>
						<font color=e7ce4a size=-1><shadow>
						<form action=client:PowerOff><input type=submit font=proportional width=115 value="Power Off" borderImage="file://rom/Borders/ButtonBorder2.bif" usestyle></form>
						</font>
					<td>
						&nbsp;
					<td>
						<font color=e7ce4a size=-1><shadow>
						<form action=client:GoToInfoPage><input type=submit font=proportional width=115 value="WebTV info" borderImage="file://rom/Borders/ButtonBorder2.bif" usestyle selected></form>
						</font>
			</table>
</table>

</body>
</html>
