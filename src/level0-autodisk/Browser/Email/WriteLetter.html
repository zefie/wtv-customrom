<html>

<script src=file://ROM/JS/parameters.js></script>

<head>
	<link href="CommonStyles.css" rel=Stylesheet>

	<style>
		#writeArea {
			position: absolute;
			top: 82;
			left: 120;
			width: 418;
		}
		
	</style>

	<script>
window.message(" parameters.cmd = ", parameters.cmd);
		if (top.gFullOutBox) {
			var newLoc = "EmailWarning.html?nextpage=CleanUpMail.html&error=OutBoxFull&button=cleanup";
			location = newLoc;
		}

		function DoneSnapping()
		{
			window.message("***************88 DoneSnapping");
			top.gRequest.url = "cache:snapshot.jpg";
			var done = false;
			var status;

			while (!done) {
				status = top.gRequest.status();
				if (status >= kErrorStatus)
					done = true;
				if (status == kCompleteStatus) {	
					done = true;
				}
			}
			window.message("status = ", status);
			if (status == kCompleteStatus) {
				var data = top.gRequest.data();
				window.message("data len = ", data.length);
			}
		}

		function DoneGabbing()
		{
			window.message("***************88 DoneGabbing");
		}

	</script>

	<title>
		Write a message
	</title>

</head>

<print blackandwhite>

<body
	text=42BD52
	link=189CD6
	vlink=189CD6
	vspace=0
	hspace=0
	bgcolor=172625
	fontsize=medium
	onUnload="window.frames['scrollingListArea'].SaveMessage();"
	>

<div id=sideBarBackground bgcolor=514971 gradcolor=1f2a30 gradangle=0>
</div>

<div id=sideBar>
	<script>
		// Here is where the sidebar is created
		var L_EraseButton_Text = "Erase";
		var L_PhotoButton_Text = "Photo";
		var L_RecordButton_Text = "Recording";
		var L_SpellButton_Text = "Spelling";

		top.beginSidebars(true);
		top.addSidebar(top.L_ListButton_Text, "ListMail.html", "MainFrameArea", "", true);
		top.addSidebar(top.L_AddressesButton_Text, "Addresses.html", "MainFrameArea", "", true);

		if (!top.gIsFreeEmail) {
			var videoFile = "file://" + top.gPath.EmailData + "snapshot." + top.gUserID + ".jpg";
			var audioFile = "file://" + top.gPath.EmailData + "voicemail." + top.gUserID + ".wav";
			top.addSidebar(L_PhotoButton_Text, "client:videocapture?notify=javascript:frames['MainFrameArea'].DoneSnapping()&device=video&width=100%25&height=100%25&name=cache:snapshot.jpg&donebuttonlabel=Add to Message&open", "MainFrameArea", "", true);
			top.addSidebar(L_RecordButton_Text, "client:soundcapture?notify=javascript:frames['MainFrameArea'].DoneGabbing()&device=audio&rate=8000&name=" + audioFile + "&donebuttonlabel=Add to Message&open", "MainFrameArea", "", true);
		}
		top.addSidebar(L_EraseButton_Text, "", "MainFrameArea","onClick=\"window.frames['scrollingListArea'].ClearFields(true);\"", true);

		if (!top.gIsFreeEmail)
			top.addSidebar(L_SpellButton_Text, "Help.html", "MainFrameArea", "", true);

		top.addSidebar(top.L_HelpButton_Text, "Help.html", "MainFrameArea", "", true);
		top.endSidebars();
	</script>
</div>

<div id=scrollArea>
	<script>
		var m = '<IFRAME name=scrollingListArea SCROLLTARGET=YES SRC="WriteLetterScroll.html?cmd='
				+ parameters.cmd + "&reply=" + parameters.reply
				+ '" HEIGHT=341 WIDTH=454 onscroll="top.refreshArrows()" frameborder=no></IFRAME>';
		document.write(m);
	</script>
</div>

<div id=upArrow>
	<img src=images/ScrollArrowUp.gif>
</div>

<div id=downArrow>
	<img src=images/ScrollArrowDown.gif>
</div>

<!--
<div id=sideBarSeparator>
	<img src=images/TransVertShadow.gif width=6 height=384>
</div>
-->

<div id=bannerAdBackground>
</div>

<div id=bannerAdDisplay>
	<script>
		top.WriteAd("epg-banner");
	</script>
</div>

<div id=bannerAdDivider>
	<table>
		<tr><td width=560 height=1 color=ffffff transparency=84></td></tr>
	</table>
</div>

</body>
</html>
